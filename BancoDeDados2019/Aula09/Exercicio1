CREATE TABLE ENDERECO(
	CODENDERECO VARCHAR2(2) CONSTRAINT ENDERECO_COD_NN NOT NULL,
	CEP VARCHAR2(9) CONSTRAINT ENDERECO_CEP_NN NOT NULL,
	NUMERO NUMBER CONSTRAINT ENDERECO_NUM_NN NOT NULL,
	RUA	VARCHAR2(50) CONSTRAINT ENDERECO_RUA_NN NOT NULL,
	BAIRRO VARCHAR2(2) CONSTRAINT ENDERECO_BAIRRO_NN NOT NULL,

	PRIMARY KEY(CODENDERECO)
);

CREATE TABLE PESSOA(
	CODIGO NUMBER(7) CONSTRAINT PESSOA_CODIGO_NN NOT NULL,
	RG NUMBER(15) CONSTRAINT PESSOA_RG_NN NOT NULL,
	NOME VARCHAR2(20) CONSTRAINT PESSOA_NOME_NN NOT NULL,
	CODENDERECO VARCHAR2(2) CONSTRAINT PESSOA_CODEND_NN NOT NULL,
	PRIMARY KEY(CODIGO),
	FOREIGN KEY(CODENDERECO) REFERENCES ENDERECO(CODENDERECO)
);


DECLARE
V_COD_ENDERECO NUMBER := &CODENDERECO;
RC1 ENDERECO%ROWTYPE;
RC2 PESSOA%ROWTYPE;
Cursor C1(P_CODIGO_ENDERECO in NUMBER:= 1) is select * FROM ENDERECO WHERE CODENDERECO = P_CODIGO_ENDERECO;
Cursor C2(P_CODIGO_ENDERECO in PESSOA.CODENDERECO%TYPE) is select * FROM PESSOA WHERE CODENDERECO = P_CODIGO_PESSOA; 
BEGIN

-- COM LOOP
FOR C1(V_COD_ENDERECO) IN RCL1 LOOP
	FOR C2(RCL1.CODENDERECO) IN RCL2 LOOP
		DBMS_OUTPUT.PUT_LINE('PESSOA': || RCL2.NOME||'  RG' || RCL2.RG);
	END LOOP;
END LOOP;

-- NA M√ÉO
OPEN C1(V_COD_ENDERECO);
LOOP
	FETCH C1 INTO RC1;

	OPEN C2(RC1.CODENDERECO);
	LOOP
		FETCH C2 INTO RC2;
		DBMS_OUTPUT.PUT_LINE(PESSOA': || RC2.NOME||'  RG' || RC2.RG')

	EXIT WHEN C2%NOTFOUND
	END LOOP;
	CLOSE C2;

EXIT WHEN C1%NOTFOUND
END LOOP;
CLOSE C1;

END;


